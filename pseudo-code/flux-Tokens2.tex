\tikzset{%
  >={Latex[width=2mm,length=2mm]},
  % Specifications for style of nodes:
            base/.style = {rectangle, rounded corners, draw=black,
                           minimum width=2cm, minimum height=1cm, text width=4cm, text centered, font=\sffamily, yshift=-1cm},
  activityStarts/.style = {base, fill=blue!30},
       startstop/.style = {base, fill=red!30},
    activityRuns/.style = {base, fill=green!30},
         process/.style = {base, fill=orange!15, font=\ttfamily},
}

%[pos][altura][contentpos] = [t,c,b][10cm...][t,c,b]
\newcommand{\tokenchart}{%
% \begin{minipage}
\begin{figure}[h!tbp]{\textwidth}
	\centering
	
    

% Drawing part, node distance is 1.5 cm and every node
% is prefilled with white background
\frame{%
%     \resizebox{\textwidth}{!}{%
    \begin{tikzpicture}[node distance=1.5cm,
        every node/.style={fill=white, font=\sffamily}, align=center]
      % Specification of nodes (position, etc.)
      \node (start) [activityStarts]              {Activity starts};
      \node (p1)    [startstop, below of=start]   {A new \gls{gd} power plant is needed?};
      \node (p2)    [process, below of=p1] {Define the power capacity ($P_{n}$)};
      \node (p3)    [process, below of=p2] {Create the tokens ($T_{n}$)};
      \node (p4)    [startstop, below of=p3] {Raise the fundraising process};
      \node (p5)    [activityRuns, below of=p4] {Distribute the tokens (transaction from group to member)};
      \node (p6)    [activityRuns, below of=p5] {Calculate individual quota ($qm_{n}$)};
      \node (end)   [activityStarts, below of=p6] {End};
      
      \node (n1)    [activityRuns, right of=p1, xshift=4cm, yshift=1cm]  {raise Poll()};
      \node (n2)    [activityRuns, right of=p4, xshift=4cm, yshift=1cm] {raise Auction() with fixed price};
      
      
      % Specification of lines between nodes specified above
      % with aditional nodes for description 
      \draw[->]  (start) -- (p1);
      \draw[->]     (p1) -- node {Yes} (p2);
      \draw[->]     (p1) -- ++(-4cm,0) |- (end) node[pos=0.25] {No};
      \draw[->]     (p2) -- (p3);
      \draw[->]     (p3) -- (p4);
      \draw[->]     (p4) -- (p5);
      \draw[->]     (p5) -- (p6);
      \draw[->]     (p6) -- (end);
      
      \draw[-]     (p1) -- (n1);
      \draw[-]     (p4) -- (n2);
    %   \draw[->]      (onStartBlock) -- node {No} (onResumeBlock);
    %   \draw[->]     (onResumeBlock) |- (ActivityDestroyed);
    %   \draw[->]      (onStartBlock) -- node {Yes} (onPauseBlock);
    %   \draw[->]      (onPauseBlock) -- node {No}  (onStopBlock);
    %   \draw[->]       (onStopBlock) -- (onDestroyBlock);
    %   \draw[->]    (onPauseBlock) -- node {Yes} (onRestartBlock);
    %   \draw[->]    (onRestartBlock) |- (onStartBlock);
      %\draw[->]       (onStopBlock) -| node[yshift=1.25cm, text width=3cm] {The activity comes to the foreground} (onRestartBlock);
    %   \draw[->]    (onDestroyBlock) -- (ActivityDestroyed);
      %\draw[->]      (onPauseBlock) -| node(priorityXMemory) {higher priority $\rightarrow$ more memory} (ActivityEnds);
      %\draw           (onStopBlock) -| (priorityXMemory);
      %\draw[->]     (ActivityEnds)  |- node [yshift=-2cm, text width=3.1cm] {User navigates back to the activity} (onCreateBlock);
     % \draw[->] (onPauseBlock.east) -- ++(2.6,0) -- ++(0,2) -- ++(0,2) -- node[xshift=1.2cm,yshift=-1.5cm, text width=2.5cm] {The activity comes to the foreground}(onResumeBlock.east);
        
        
        
	\end{tikzpicture}
}
	\caption{Tokens generation process.}
\end{figure}
% \end{minipage}
}